!function(a,b,c){"use strict";var d="ht",e=a[d],f="position",g="absolute",h="px",i="left",j="top",k="innerHTML",l="className",m="width",n="height",o="0",p="display",q="none",r="visibility",s="user-select",t="margin",u="padding",v=null,w=e.Color,x=e.Default,y=x.getInternal(),z=a.setTimeout,A=a.setInterval,B=a.clearTimeout,C=a.clearInterval,D=a.parseInt,E=x.isLeftButton,F=x.isDragging,G=x.startDragging,H=x.getDistance,I=x.isTouchable,J=w.widgetIconHighlight,K=w.widgetIconBorder,L=w.widgetIconGradient,M=function(){return document},N=function(a,b){return a.querySelectorAll(b)},O=function(a){var b=M().createElement(a);return"ul"===a&&(S(b,f,"relative"),S(b,t,o),S(b,u,o),S(b,"list-style",q),S(b,"box-sizing","border-box"),S(b,"-moz-box-sizing","border-box"),S(b,p,"inline-block"),S(b,"vertical-align","text-bottom"),S(b,"border","1px solid "+x.contextMenuBorderColor),S(b,"box-shadow","0 0 16px 1px "+x.contextMenuShadowColor),S(b,"overflow","hidden"),x.contextMenuBorderRadius&&S(b,"border-radius",x.contextMenuBorderRadius+h)),b},P=function(a){var b=a.touches[0];return b?b:a.changedTouches[0]},Q=function(){return O("div")},R=function(){return O("canvas")},S=function(a,b,c){a.style.setProperty(b,c,v)},T=function(a,b,c){x.def(e.widget[a],b,c)},U=function(a,b){a.appendChild(b)},V=function(a,b){a.removeChild(b)},W=y.addEventListener,X=y.removeEventListener;y.addMethod(x,{contextMenuCheckIcon:{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:K},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:J}]},contextMenuRadioIcon:{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:K},{type:"circle",rect:[4,4,8,8],borderWidth:1,borderColor:J,gradient:x.imageGradient,gradientColor:L,background:J}]},contextMenuLabelFont:(I?"16":"13")+"px arial, sans-serif",contextMenuLabelColor:"#000",contextMenuBackground:"#fff",contextMenuDisabledLabelColor:"#888",contextMenuHoverBackground:"#648BFE",contextMenuHoverLabelColor:"#fff",contextMenuSeparatorWidth:1,contextMenuSeparatorColor:"#E5E5E5",contextMenuScrollerColor1:"#FDFDFD",contextMenuScrollerColor2:"#D3D3D3",contextMenuScrollerBorderColor:"#C3C3C3",contextMenuBorderColor:"#C3C3C3",contextMenuShadowColor:"rgba(128, 128, 128, 0.5)",contextMenuBorderRadius:5,contextMenuSubmenuMark:"▶"},!0);var Y=function(a){var b=this,c=a._view;if(b.$11b=a,b.addListeners(),W(c,"contextmenu",function(a){a.preventDefault()}),!I){var d=b.$37b=b.$36b.bind(b);W(c,"mouseover",d),W(c,"mouseout",d)}};x.def(Y,b,{ms_listener:1,getView:function(){return this.$11b._view},handle_touchstart:function(a){if(x.preventDefault(a),E(a)){for(var b=this,c=b.$11b,d=b.getView(),e=d.children,f=0;f<e.length;f++){var g=e[f],h=g.$24b,i=g.$25b;if(h&&h.contains(a.target))return c.scrollUp(g),b.$28b=z(function(){b.$29b=A(function(){c.scrollUp(g)},100)},500),void G(b,a);if(i&&i.contains(a.target))return c.scrollDown(g),b.$28b=z(function(){b.$29b=A(function(){c.scrollDown(g)},100)},500),void G(b,a)}I&&(a=P(a)),b.$30b={x:a.pageX,y:a.pageY}}},handle_mousedown:function(a){this.handle_touchstart(a)},handle_touchend:function(a){if(E(a)){var b=this,c=b.$30b,d=I?{x:P(a).pageX,y:P(a).pageY}:{x:a.pageX,y:a.pageY};if(!c||H(c,d)>1)return void delete b.$30b;for(var e=b.getView(),f=b.$11b,g=a.target,h=v,i=v,j=f._items,k=e.$26b,l=0;l<k.length;l++)if(i=k[l],i.contains(g)){h=i.getAttribute("data-id");break}if(h&&j){var m=f.$17b(j,function(a){return a._id===h});if(m){var n=!1;m.disabled instanceof Function?n=m.disabled.call(f,m):m.disabled===!0&&(n=!0),n||(m.items?I&&b.$36b(i,!0):f.$1b(m,a))}}delete b.$30b}},$36b:function(a,b){if(!F()){var c,d=this,e=d.$11b,f=d.getView(),g=e.$20b||f.children[0],k=e.$19b,m=f.$26b,n=f.children,o=a.target,p=f.getBoundingClientRect(),q=x.getWindowInfo(),s=q.width,t=q.height,u=function(a){for(var b=0;b<n.length;b++){var c=n[b],d=new RegExp(a+"$"),e=c[l];if(e&&(d.test(e)||e.indexOf(a+" ")>=0))return c}},v=function(a){for(var b=0;b<m.length;b++){var c=m[b],d=new RegExp(a+"$"),e=c[l];if(e&&(d.test(e)||e.indexOf(a+" ")>=0))return c}},w=function(a){var b=v("menu-item"+a.$45b),c=b.getBoundingClientRect(),d=c.top-p.top,e=c.left-p.left;S(a,j,d+h),S(a,i,e+c.width+h);var f=a.getBoundingClientRect(),g=f.top,k=f.left,l=f.height,m=f.width,n=g+l+2,o=k+m+2;n>t&&S(a,j,d+t-n+h),o>s&&S(a,i,e-m+h)};if(b)c=a;else{if("mouseover"===a.type){for(var y=0;y<m.length;y++){var z=m[y];if(z.contains(o)){c=z;break}}if(!c&&k){var A=k.parentNode,B=u("submenu"+k.getAttribute("data-id"));(B&&B.contains(o)||A&&A.contains(o))&&(c=k)}}else if("mouseout"===a.type){for(var C=!1,D=a.relatedTarget,y=0;y<n.length;y++){var E=n[y];if("hidden"!==E.style.visibility&&E.contains(D)){C=!0;break}}if(C)return}!c&&g&&(c=v("menu-item"+(g.$45b||"NaN")))}if(c!=k){if(k)for(var G=k;G;){if(G[l]=G[l].replace(" menu-item-hover",""),G[l].indexOf("disabled")<0){var H=e.getItemByProperty("_id",G.getAttribute("data-id"));null!=H.background?H.background instanceof Function?S(G,"background-color",H.background.call(e,H)):S(G,"background-color",H.background):S(G,"background-color",x.contextMenuBackground),S(G,"color",x.contextMenuLabelColor)}var I=u("submenu"+G.getAttribute("data-id"));I&&S(I,r,"hidden");var J=G.parentNode;G=v("menu-item"+(J.$45b||"NaN"))}if(c){for(var K=c,L=[];K;){K[l]+=" menu-item-hover",K[l].indexOf("disabled")<0&&(S(K,"background-color",x.contextMenuHoverBackground),S(K,"color",x.contextMenuHoverLabelColor));var M=u("submenu"+K.getAttribute("data-id"));M&&(S(M,r,"visible"),L.push(M));var J=K.parentNode;K=v("menu-item"+(J.$45b||"NaN"))}L.reverse(),L.forEach(function(a){w(a)})}}e.$19b=c,e.$20b=c?c.parentNode:f.children[0]}},handle_mouseup:function(a){this.handle_touchend(a)},handleWindowTouchEnd:function(a){var b=this;b.$28b!=v&&(B(b.$28b),delete b.$28b),b.$29b!=v&&(C(b.$29b),delete b.$29b),delete b.$34b,delete b.$30b,delete b.$35b},handleWindowMouseUp:function(a){this.handleWindowTouchEnd(a)},handle_mousemove:function(a){this.handle_touchmove(a)},handle_touchmove:function(a){if(!F()&&E(a)){for(var b=this,c=b.getView().children,d=v,e=0;e<c.length;e++){var f=c[e];if(f.contains(a.target)){d=f;break}}var g=b.$30b,h=I?{x:P(a).pageX,y:P(a).pageY}:{x:a.pageX,y:a.pageY};d&&g&&H(g,h)>2&&(G(b,a),b.$34b=d,b.$35b=d.$18b)}},handleWindowTouchMove:function(a){a.preventDefault();var b=this,c=b.$11b,d=b.$34b,e=b.$35b,f=b.$30b;if(f&&d){var g=I?{x:P(a).pageX,y:P(a).pageY}:{x:a.pageX,y:a.pageY},h=g.y-f.y;h>0?c.scrollUp(d,d.$18b-(e-h)):c.scrollDown(d,e-h-d.$18b)}},handleWindowMouseMove:function(a){this.handleWindowTouchMove(a)},$10b:function(a,b){a.preventDefault();for(var c=this,d=c.getView().children,e=v,f=0;f<d.length;f++){var g=d[f];if(g.contains(a.target)){e=g;break}}if(e){var h=this.$11b,i=h.getRowHeight();Math.abs(b)>.05&&(b>0?h.scrollUp(e,b*i):0>b&&h.scrollDown(e,-b*i))}},handle_mousewheel:function(a){this.$10b(a,a.wheelDelta/40)},handle_DOMMouseScroll:function(a){this.$10b(a,-a.detail)},$44b:function(a){this.getView().contains(a.target)||this.$11b.hide()},$41b:function(a){this.$11b.show(a)},$4b:function(b,c){var d=this.$11b;if(c=c||d._items,c&&c.length&&b.keyCode){var e=[b.keyCode];b.shiftKey&&e.push(16),b.ctrlKey&&e.push(17),b.altKey&&e.push(18),/mac/.test(a.navigator?a.navigator.userAgent.toLowerCase():"")?b.metaKey&&e.push(17):b.metaKey&&e.push(91),e.sort();var f=e.join(),g=d.$17b(c,function(a){if(a.key){var b=a.key.slice(0);return b.sort(),f===b.join()}});if(g){g.preventDefault!==!1&&b.preventDefault();var h=!1;g.disabled instanceof Function?h=g.disabled.call(d,g):g.disabled===!0&&(h=!0),h||d.$1b(g,b)}}},$39b:function(a){var b=this,c=P(a);b.$32b={x:c.pageX,y:c.pageY}},$38b:function(a){var b=this,c=P(a);b.$31b={x:c.pageX,y:c.pageY},b.$33b=z(function(){b.$31b&&(b.$32b?H(b.$31b,b.$32b)<10&&b.$11b.show(a):b.$11b.show(a)),delete b.$33b,delete b.$31b,delete b.$32b},600)},$40b:function(a){var b=this;b.$33b!=v&&(B(b.$33b),delete b.$33b,delete b.$31b,delete b.$32b)}}),e.widget.ContextMenu=function(a){var b=this,c=b._view=y.createView(null,b);c[l]="ht-widget-contextmenu",b.setItems(a),b.$13b=new Y(b),S(c,"font",x.contextMenuLabelFont),S(c,f,g),S(c,"cursor","default"),S(c,"-webkit-"+s,q),S(c,"-moz-"+s,q),S(c,"-ms-"+s,q),S(c,s,q),S(c,"box-sizing","border-box"),S(c,"-moz-box-sizing","border-box"),x.baseZIndex!=v&&S(c,"z-index",D(x.baseZIndex)+2+""),b.$3b=function(a){b.$13b.$4b(a)}},T("ContextMenu",b,{$5b:0,_items:v,$21b:v,_enableGlobalKey:!1,ms_v:1,enableGlobalKey:function(){var a=this,b=a._enableGlobalKey;b===!1&&(W(M(),"keydown",a.$3b),a._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,X(M(),"keydown",this.$3b)},setItems:function(a){this._items=a},getItems:function(){return this._items},setVisibleFunc:function(a){this.$16b=a},setLabelMaxWidth:function(a){this.$43b=a},$1b:function(b,c){var d=this;if("check"===b.type)b.selected=!b.selected;else if("radio"===b.type){var e=b.groupId;d.$17b(d._items,function(a){a.groupId===e&&(a.selected=!1)}),b.selected=!0}if(d.hide(),b.action)b.action.apply(b.scope||d,[b,c]);else if(b.href){var f=b.linkTarget||"_self";a.open(b.href,f)}},getItemById:function(a){return this.getItemByProperty("id",a)},setItemVisible:function(a,b){var c=this.getItemById(a);c&&(c.visible=b)},getItemByProperty:function(a,b,c){var d=this;if(c=c||d._items,!c||0===c.length)return v;var e=d.$17b(c,function(c){return c[a]===b});return e||v},scrollUp:function(a,b){var c=this;if(b=b==v?20:b,b=D(b),0!==b){var d=0;a.$18b>b&&(d=a.$18b-b),c.$42b(a,d),a.scrollTop=d,a.$18b=d}},scrollDown:function(a,b){var c=this;if(b=b==v?20:b,b=D(b),0!==b){var d=a.$22b,e=a.$23b,f=d-e;e+a.$18b+b<d&&(f=a.$18b+b),c.$42b(a,f),a.scrollTop=f,a.$18b=f}},$42b:function(a,b){b=b==v?a.$18b:b;var c=a.$24b,d=a.$25b;c&&(S(c,"top",b+h),0==b?S(c,p,q):S(c,p,"block")),d&&(S(d,"bottom",-b+h),b==a.$22b-a.$23b?S(d,p,q):S(d,p,"block"))},getRowHeight:function(){return this._view.querySelector(".menu-item").offsetHeight},$17b:function(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(b(d))return d;if(d.items){var e=this.$17b(d.items,b);if(e)return e}}},$2b:function(a,b){for(var c=this,d=0;d<a.length;d++){c.$5b++;var i=a[d];if(i.visible!==!1&&(!x.isFunction(i.visible)||i.visible()!==!1)&&(!c.$16b||c.$16b.call(c,i))){var j=O("li"),o=c.$5b+"";if(S(j,"white-space","nowrap"),S(j,p,"block"),"separator"===i||i.separator===!0){var q=Q();q[l]="separator",S(q,n,x.contextMenuSeparatorWidth+h),S(q,"background",x.contextMenuSeparatorColor),U(j,q)}else{i._id=o,j.setAttribute("data-id",o);var s=O("span"),v=O("span"),w=R(),y=Q();if(S(s,p,"inline-block"),S(s,n,"1.2em"),S(v,p,"inline-block"),S(v,n,"1.2em"),S(v,"line-height","1.2em"),w[l]="prefix",S(w,p,"inline-block"),S(w,m,"1em"),S(w,n,"1em"),S(w,"vertical-align","middle"),S(w,t,"0 0.2em"),"check"===i.type&&i.selected?w[l]+=" check-prefix":"radio"===i.type&&i.selected&&(w[l]+=" radio-prefix"),U(j,w),i.icon){var z=R();z[l]="contextmenu-item-icon",S(z,p,"inline-block"),S(z,n,"1.2em"),S(z,m,"1.2em"),S(z,"margin-right","0.2em"),S(z,"float","left"),z.$50b=i.icon,z._item=i,U(s,z)}if(v[k]=i.label,U(s,v),U(j,s),y[l]="suffix",S(y,p,"inline-block"),S(y,"margin-left","1em"),S(y,"margin-right","0.4em"),S(y,"text-align","right"),S(y,"font-size","75%"),i.items&&(y[k]=x.contextMenuSubmenuMark),i.suffix&&(y[k]=i.suffix),U(j,y),j[l]="menu-item menu-item"+o,null!=i.background?i.background instanceof Function?S(j,"background-color",i.background.call(c,i)):S(j,"background-color",i.background):S(j,"background-color",x.contextMenuBackground),S(j,"color",x.contextMenuLabelColor),S(j,u,"3px 0"),i.disabled instanceof Function){var A=i.disabled.call(c,i);A&&(j[l]+=" disabled",S(j,"color",x.contextMenuDisabledLabelColor))}else i.disabled&&(j[l]+=" disabled",S(j,"color",x.contextMenuDisabledLabelColor));if(i.items){c.$21b||(c.$21b=new e.List);var B=O("ul");B[l]="submenu"+o,B.$45b=o,S(B,r,"hidden"),S(B,f,g),U(c._view,B),c.$21b.add(B),c.$2b(i.items,B)}}U(b,j)}}},rebuild:function(){var a=this,b=a._items,c=a._view;if(c&&(c[k]="",a.$21b=v,a.$5b=0,a.$19b=v,a.$20b=v,c.$26b=v,b&&0!==b.length)){var d=O("ul",a._r);U(c,d),a.$2b(b,d)}},addTo:function(a){if(a){var b=this,c=b.$13b;if(b.$12b=a,b.$9b=function(a){c.$44b(a)},b.$27b=function(a){c.$41b(a)},I){var d=b.$6b=function(a){c.$38b(a)},e=b.$7b=function(a){c.$39b(a)},f=b.$8b=function(a){c.$40b(a)};W(a,"touchstart",d,!0),W(a,"touchmove",e),W(a,"touchend",f)}else W(a,"contextmenu",b.$27b)}},showOnView:function(a,b,c){a=a.getView?a.getView():a;var d=x.getWindowInfo(),e=a.getBoundingClientRect();this.show(e.left+d.left+b,e.top+d.top+c)},show:function(a,b,c){var d=this,c=c==v?!0:!1,e=d._view;if(e){if(d.invalidate(),1===arguments.length){var n=a;if(I){var q=P(n);a=q.pageX,b=q.pageY}else a=n.pageX,b=n.pageY}var r=x.getWindowInfo(),s=r.width,t=r.height,u=r.left,w=r.top,y={pageX:a,pageY:b,clientX:a-u,clientY:b-w,target:1,originEvent:n},z=y.clientX,A=y.clientY,B=function(a){a.style.height=t-6+h;var b=Q(),c=Q(),e=function(a){S(a,f,g),S(a,"text-align","center"),S(a,m,"100%"),S(a,"font-size",10+h),S(a,"padding","2px 0"),S(a,"border","0px solid "+x.contextMenuScrollerBorderColor),S(a,"background-color",x.contextMenuScrollerColor1),a.style.backgroundImage="-webkit-linear-gradient(top, "+x.contextMenuScrollerColor1+", "+x.contextMenuScrollerColor2+")",a.style.backgroundImage="linear-gradient(to bottom, "+x.contextMenuScrollerColor1+", "+x.contextMenuScrollerColor2+")"};b[l]="menu-arrow-item menu-arrow-item-top",c[l]="menu-arrow-item menu-arrow-item-bottom",e(b),S(b,"top",o),S(b,"left",o),S(b,"border-bottom-width",1+h),b[k]="▲",e(c),S(c,"bottom",o),S(c,"left",o),S(c,"border-top-width",1+h),c[k]="▼",a.$24b=b,a.$25b=c,a.$18b=a.scrollTop,a.$22b=a.scrollHeight,a.$23b=a.clientHeight,U(a,b),U(a,c),d.$42b(a)};d.beforeShow&&d.beforeShow(y);var C=d._items;if(C&&(n&&n.preventDefault(),C.length)){d.rebuild(),x.appendToScreen(e),e.$26b=N(e,".menu-item");var D=e.children[0];D.offsetHeight>t&&B(D);var E=A+(c?1:0),F=z+(c?1:0),G=function(a){for(var b=0,c=0,e=0,f=d.$43b;e<a.children.length;e++){var g=a.children[e];if(g.getAttribute("data-id")){var i=g.children[1],j=g.children[2],l=i.children;if(f){var n=l[0];l.length>1&&(n=l[1]),n.offsetWidth>f&&(n[k]="<marquee scrollamount='3'>"+n[k]+"</marquee>",n.children[0].style.verticalAlign="text-bottom",S(n,m,f+h),S(n,p,"inline-block"))}var o=i.offsetWidth,q=j.offsetWidth;o>b&&(b=o),q>c&&(c=q)}}for(e=0;e<a.children.length;e++){var g=a.children[e];if(g.getAttribute("data-id")){var i=g.children[1],j=g.children[2],r=i.children[0],s=i.children[1];!s&&r.style.width&&S(r,m,b+h),S(i,m,b+h),S(j,m,c+h)}}};G(D);var H=A+3+e.offsetHeight,J=z+3+e.offsetWidth;H>t?S(e,j,E-(H-t)+w+h):S(e,j,E+w+h),J>s?S(e,i,F-(J-s)+u+h):S(e,i,F+u+h);var K=d.$21b;K&&K.each(function(a){G(a),a.offsetHeight>t&&B(a)}),d.$9b&&W(M(),I?"touchstart":"mousedown",d.$9b,!0),d.afterShow&&d.afterShow(y),d.$47b()}}},isShowing:function(){return this._view?this._view.parentNode!=v:!1},getRelatedView:function(){return this.$12b},hide:function(){var a=this,b=a._view;b&&b.parentNode&&(V(b.parentNode,b),X(M(),I?"touchstart":"mousedown",a.$9b,!0),a.afterHide&&a.afterHide())},dispose:function(){var a=this,b=a.$12b,c=a._view;c&&(c.parentNode&&V(c.parentNode,c),a.disableGlobalKey(),b&&(I?(X(b,"touchstart",a.$6b,!0),X(b,"touchmove",a.$7b),X(b,"touchend",a.$8b)):X(b,"contextmenu",a.$27b)),a._view=a._items=a.$21b=a.$19b=a.$12b=a.beforeShow=a.afterShow=a.afterHide=a.$9b=a.$3b=a.$6b=a.$7b=a.$8b=a.$27b=v)},$46b:function(a,b,c,d,e){var f=y.initContext(a);y.translateAndScale(f,0,0,1),f.clearRect(0,0,c,d),x.drawStretchImage(f,x.getImage(b),"fill",0,0,c,d,e,this),f.restore()},$47b:function(){var a,b,c,d=this,e=d._view;if(d.isShowing()){var f=N(e,".check-prefix");for(c=0;c<f.length;c++){var g=f[c];a=g.clientWidth,b=g.clientHeight,g.$48b=a,g.$49b=b,y.setCanvas(g,a,b)}var h=N(e,".radio-prefix");for(c=0;c<h.length;c++){var i=h[c];a=i.clientWidth,b=i.clientHeight,i.$48b=a,i.$49b=b,y.setCanvas(i,a,b)}var j=N(e,".contextmenu-item-icon");for(c=0;c<j.length;c++){var k=j[c];a=k.clientWidth,b=k.clientHeight,k.$48b=a,k.$49b=b,y.setCanvas(k,a,b)}}},validateImpl:function(){var a,b,c,d=this,e=d._view;if(d.isShowing()){var f=N(e,".check-prefix");for(c=0;c<f.length;c++){var g=f[c];a=g.$48b,b=g.$49b,a&&b&&d.$46b(g,x.contextMenuCheckIcon,a,b)}var h=N(e,".radio-prefix");for(c=0;c<h.length;c++){var i=h[c];a=i.$48b,b=i.$49b,a&&b&&d.$46b(i,x.contextMenuRadioIcon,a,b)}var j=N(e,".contextmenu-item-icon");for(c=0;c<j.length;c++){var k=j[c];a=k.$48b,b=k.$49b,a&&b&&d.$46b(k,x.getImage(k.$50b),a,b,k._item)}}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);