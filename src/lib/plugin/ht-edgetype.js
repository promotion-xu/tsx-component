!function(a,b,c){"use strict";var d="ht",e=a[d],f=Math,g=f.max,h=f.min,i=f.abs,j=f.atan2,k=(f.cos,f.sin,f.ceil),l=e.Default,m=l.getInternal(),n=e.List,o=m.Mat,p=m.getNodeRect,q=m.intersectionLineRect,r=l.getDistance,s=l.setEdgeType,t="left",u="right",v="top",w="bottom",x="edge.type",y="edge.gap",z="edge.center",A="edge.extend",B=function(a,b){return p(a,b).width},C=function(a,b){return p(a,b).height},D=function(a,b){return m.getEdgeHostPosition(a,b,"source")},E=function(a,b){return m.getEdgeHostPosition(a,b,"target")},F=function(a,b){var c=a.s(x),d=a.getEdgeGroup();if(d){var e=0;if(d.eachSiblingEdge(function(a){b.isVisible(a)&&a.s(x)==c&&e++}),e>1)return a.s(y)*(e-1)/2}return 0},G=function(a,b){var c=a.s(x),d=a.isLooped();if(!a.getEdgeGroup())return d?a.s(y):0;var e,f=0,g=0,h=0;return a.getEdgeGroup().getSiblings().each(function(d){d.each(function(d){if(d._40I===a._40I&&d.s(x)==c&&b.isVisible(d)){var i=d.s(y);e?(g+=h/2+i/2,h=i):(e=d,h=i),d===a&&(f=g)}})}),d?g-f+h:f-g/2},H=function(a,b){var c=b.s("edge.corner.radius");return l.toRoundedCorner(a,c)};m.addMethod(e.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),s("boundary",function(a,b,c,d){d||(b=-b);var e,f=D(c,a),g=E(c,a),h=p(c,a._40I),i=p(c,a._41I),k=new o(j(g.y-f.y,g.x-f.x)),l=r(f,g),m=f.x,s=f.y;return e=k.tf(0,b),f={x:e.x+m,y:e.y+s},e=k.tf(l,b),g={x:e.x+m,y:e.y+s},e=q(f,g,h),e&&(f={x:e[0],y:e[1]}),e=q(f,g,i),e&&(g={x:e[0],y:e[1]}),{points:new n([f,g])}}),s("ripple",function(a,b,c,d){d||(b=-b);var e=D(c,a),f=E(c,a),g=r(e,f),i=h(a.s("edge.offset"),g/2),l=a.s("edge.ripple.size"),m=a.s("edge.ripple.length"),p=a.s("edge.ripple.both"),q=a.s(z),s=a.s("edge.ripple.elevation"),t=new n,u=a.s("edge.ripple.straight")?null:new n,v=new o(j(f.y-e.y,f.x-e.x));d||(s=-s),g-=2*i,m>0&&(l=k(g/m));var w=g/l;u&&u.add(1);for(var x=0;l>x;x++)u&&u.add(3),0===x?t.add({x:i+w*x,y:q?0:b}):t.add({x:i+w*x,y:b}),t.add({x:i+w*x+w/2,y:s+b}),p&&(s=-s);for(t.add({x:i+g,y:q?0:b}),x=0;x<t.size();x++){var y=v.tf(t.get(x));y.x+=e.x,y.y+=e.y,t.set(x,y)}return{points:t,segments:u}}),s("h.v",function(a,b,c){b=G(a,c);var d=new n,f=a.s(z),g=D(c,a),h=g.x,i=g.y,j=E(c,a),k=j.x,l=j.y,m=a._40I instanceof e.Edge,o=a._41I instanceof e.Edge,p=0,q=0,r=k-h,s=l-i;return f||(p=m?0:B(c,a._40I)/2,q=o?0:C(c,a._41I)/2),r>=0&&0>=s?(d.add({x:h+p,y:i+b}),d.add({x:k+b,y:i+b}),d.add({x:k+b,y:l+q})):0>=r&&s>=0?(d.add({x:h-p,y:i+b}),d.add({x:k+b,y:i+b}),d.add({x:k+b,y:l-q})):r>=0&&s>=0?(d.add({x:h+p,y:i+b}),d.add({x:k-b,y:i+b}),d.add({x:k-b,y:l-q})):(d.add({x:h-p,y:i+b}),d.add({x:k-b,y:i+b}),d.add({x:k-b,y:l+q})),H(d,a)}),s("v.h",function(a,b,c){b=G(a,c);var d=new n,f=a.s(z),g=D(c,a),h=g.x,i=g.y,j=E(c,a),k=j.x,l=j.y,m=a._40I instanceof e.Edge,o=a._41I instanceof e.Edge,p=0,q=0,r=k-h,s=l-i;return f||(p=o?0:B(c,a._41I)/2,q=m?0:C(c,a._40I)/2),r>=0&&0>=s?(d.add({x:h+b,y:i-q}),d.add({x:h+b,y:l+b}),d.add({x:k-p,y:l+b})):0>=r&&s>=0?(d.add({x:h+b,y:i+q}),d.add({x:h+b,y:l+b}),d.add({x:k+p,y:l+b})):r>=0&&s>=0?(d.add({x:h-b,y:i+q}),d.add({x:h-b,y:l+b}),d.add({x:k-p,y:l+b})):(d.add({x:h-b,y:i-q}),d.add({x:h-b,y:l+b}),d.add({x:k+p,y:l+b})),H(d,a)}),s("ortho",function(a,b,c){var d=new n,f=a.s(z),g=a.s("edge.ortho"),h=a._40I,j=a._41I,k=D(c,a),l=k.x,m=k.y,o=E(c,a),p=o.x,q=o.y,r=p-l,s=q-m,t=h instanceof e.Edge,u=j instanceof e.Edge,v=f||t?0:B(c,h)/2,w=f||t?0:C(c,h)/2,x=f||u?0:B(c,j)/2,y=f||u?0:C(c,j)/2,A=(r-(v+x)*(r>0?1:-1))*g,F=(s-(w+y)*(s>0?1:-1))*g;return i(r)<i(s)?r>=0&&0>=s?(d.add({x:l+b,y:m-w}),d.add({x:l+b,y:m+F+b-w}),d.add({x:p+b,y:m+F+b-w}),d.add({x:p+b,y:q+y})):0>=r&&s>=0?(d.add({x:l+b,y:m+w}),d.add({x:l+b,y:m+F+b+w}),d.add({x:p+b,y:m+F+b+w}),d.add({x:p+b,y:q-y})):r>=0&&s>=0?(d.add({x:l+b,y:m+w}),d.add({x:l+b,y:m+F-b+w}),d.add({x:p+b,y:m+F-b+w}),d.add({x:p+b,y:q-y})):(d.add({x:l+b,y:m-w}),d.add({x:l+b,y:m+F-b-w}),d.add({x:p+b,y:m+F-b-w}),d.add({x:p+b,y:q+y})):r>=0&&0>=s?(d.add({x:l+v,y:m+b}),d.add({x:l+A+b+v,y:m+b}),d.add({x:l+A+b+v,y:q+b}),d.add({x:p-x,y:q+b})):0>=r&&s>=0?(d.add({x:l-v,y:m+b}),d.add({x:l+A+b-v,y:m+b}),d.add({x:l+A+b-v,y:q+b}),d.add({x:p+x,y:q+b})):r>=0&&s>=0?(d.add({x:l+v,y:m+b}),d.add({x:l+A-b+v,y:m+b}),d.add({x:l+A-b+v,y:q+b}),d.add({x:p-x,y:q+b})):(d.add({x:l-v,y:m+b}),d.add({x:l+A-b-v,y:m+b}),d.add({x:l+A-b-v,y:q+b}),d.add({x:p+x,y:q+b})),H(d,a)}),s("flex",function(a,b,c){var d=new n,f=a.s("edge.flex")+F(a,c),g=a.s(z),h=a._40I,j=a._41I,k=D(c,a),l=k.x,m=k.y,o=E(c,a),p=o.x,q=o.y,r=h instanceof e.Edge,s=j instanceof e.Edge,t=p-l,u=q-m,v=g||r?0:B(c,h)/2,w=g||r?0:C(c,h)/2,x=g||s?0:B(c,j)/2,y=g||s?0:C(c,j)/2,A=t>0?f:-f,G=u>0?f:-f;return i(t)<i(u)?t>=0&&0>=u?(d.add({x:l+b,y:m-w}),d.add({x:l+b,y:m+G+b-w}),d.add({x:p+b,y:q-G+b+y}),d.add({x:p+b,y:q+y})):0>=t&&u>=0?(d.add({x:l+b,y:m+w}),d.add({x:l+b,y:m+G+b+w}),d.add({x:p+b,y:q-G+b-y}),d.add({x:p+b,y:q-y})):t>=0&&u>=0?(d.add({x:l+b,y:m+w}),d.add({x:l+b,y:m+G-b+w}),d.add({x:p+b,y:q-G-b-y}),d.add({x:p+b,y:q-y})):(d.add({x:l+b,y:m-w}),d.add({x:l+b,y:m+G-b-w}),d.add({x:p+b,y:q-G-b+y}),d.add({x:p+b,y:q+y})):t>=0&&0>=u?(d.add({x:l+v,y:m+b}),d.add({x:l+A+b+v,y:m+b}),d.add({x:p-A+b-x,y:q+b}),d.add({x:p-x,y:q+b})):0>=t&&u>=0?(d.add({x:l-v,y:m+b}),d.add({x:l+A+b-v,y:m+b}),d.add({x:p-A+b+x,y:q+b}),d.add({x:p+x,y:q+b})):t>=0&&u>=0?(d.add({x:l+v,y:m+b}),d.add({x:l+A-b+v,y:m+b}),d.add({x:p-A-b-x,y:q+b}),d.add({x:p-x,y:q+b})):(d.add({x:l-v,y:m+b}),d.add({x:l+A-b-v,y:m+b}),d.add({x:p-A-b+x,y:q+b}),d.add({x:p+x,y:q+b})),H(d,a)}),s("extend.east",function(a,b,c){var d=new n,f=a.s(A)+F(a,c),h=a.s(z),i=D(c,a),j=a._40I instanceof e.Edge,k=a._41I instanceof e.Edge,l=i.x+(h||j?0:B(c,a._40I)/2),m=i.y,o=E(c,a),p=o.x+(h||k?0:B(c,a._41I)/2),q=o.y,r=g(l,p)+f;return m>q?(d.add({x:l,y:m+b}),d.add({x:r+b,y:m+b}),d.add({x:r+b,y:q-b}),d.add({x:p,y:q-b})):(d.add({x:l,y:m-b}),d.add({x:r+b,y:m-b}),d.add({x:r+b,y:q+b}),d.add({x:p,y:q+b})),H(d,a)}),s("extend.west",function(a,b,c){var d=new n,f=a.s(A)+F(a,c),g=a.s(z),i=a._40I instanceof e.Edge,j=a._41I instanceof e.Edge,k=D(c,a),l=k.x-(g||i?0:B(c,a._40I)/2),m=k.y,o=E(c,a),p=o.x-(g||j?0:B(c,a._41I)/2),q=o.y,r=h(l,p)-f;return m>q?(d.add({x:l,y:m+b}),d.add({x:r-b,y:m+b}),d.add({x:r-b,y:q-b}),d.add({x:p,y:q-b})):(d.add({x:l,y:m-b}),d.add({x:r-b,y:m-b}),d.add({x:r-b,y:q+b}),d.add({x:p,y:q+b})),H(d,a)}),s("extend.north",function(a,b,c){var d=new n,f=a.s(A)+F(a,c),g=a.s(z),i=a._40I instanceof e.Edge,j=a._41I instanceof e.Edge,k=D(c,a),l=k.x,m=k.y-(g||i?0:C(c,a._40I)/2),o=E(c,a),p=o.x,q=o.y-(g||j?0:C(c,a._41I)/2),r=h(m,q)-f;return l>p?(d.add({y:m,x:l+b}),d.add({y:r-b,x:l+b}),d.add({y:r-b,x:p-b}),d.add({y:q,x:p-b})):(d.add({y:m,x:l-b}),d.add({y:r-b,x:l-b}),d.add({y:r-b,x:p+b}),d.add({y:q,x:p+b})),H(d,a)}),s("extend.south",function(a,b,c){var d=new n,f=a.s(A)+F(a,c),h=a.s(z),i=a._40I instanceof e.Edge,j=a._41I instanceof e.Edge,k=D(c,a),l=k.x,m=k.y+(h||i?0:C(c,a._40I)/2),o=E(c,a),p=o.x,q=o.y+(h||j?0:C(c,a._41I)/2),r=g(m,q)+f;return l>p?(d.add({y:m,x:l+b}),d.add({y:r+b,x:l+b}),d.add({y:r+b,x:p-b}),d.add({y:q,x:p-b})):(d.add({y:m,x:l-b}),d.add({y:r+b,x:l-b}),d.add({y:r+b,x:p+b}),d.add({y:q,x:p+b})),H(d,a)});var I=function(a,b,c,d,e){if(d.sort(function(a,d){var e=a.getSourceAgent()===b?a.getTargetAgent():a.getSourceAgent(),f=d.getSourceAgent()===b?d.getTargetAgent():d.getSourceAgent(),g=e.p(),h=f.p();if(c===t||c===u){if(g.y>h.y)return 1;if(g.y<h.y)return-1}else{if(g.x>h.x)return 1;if(g.x<h.x)return-1}return l.sortFunc(a.getId(),d.getId())}),e){for(var f,g,h,i=a.getSourceAgent(),j=a.getTargetAgent(),k=0;k<d.size();k++){var m=d.get(k);m.getSourceAgent()===i&&m.getTargetAgent()===j||m.getTargetAgent()===i&&m.getSourceAgent()===j?(g||(g=new n),g.add(m,0)):g?(h||(h=new n),h.add(m)):(f||(f=new n),f.add(m))}d.clear(),f&&d.addAll(f),g&&d.addAll(g),h&&d.addAll(h)}var o=d.indexOf(a),p=d.size(),q=a.s(y);return{side:c,index:o,size:p,offset:-q*(p-1)/2+q*o}},J=function(a,b,c,d,e){var f=b.s(x);return I(b,c,d,c.getAgentEdges().toList(function(b){return a.isVisible(b)&&b.s(x)===f}),e)},K=function(a,b){var c=a.getSourceAgent()===b?a.getTargetAgent():a.getSourceAgent(),d=b.p(),e=c.p(),f=e.x-d.x,g=e.y-d.y;return f>0&&i(g)<=f?u:0>f&&i(g)<=-f?t:g>0&&i(f)<=g?w:v},L=function(a,b,c){var d=b.s(x),e=K(b,c);return I(b,c,e,c.getAgentEdges().toList(function(b){return a.isVisible(b)&&b.s(x)===d&&K(b,c)===e}))},M=function(a,b){var c=a.getSourceAgent()===b,d=c?a.getTargetAgent():a.getSourceAgent(),e=b.p(),f=d.p();return c?e.y>f.y?v:w:e.x<f.x?u:t},N=function(a,b,c){var d=b.s(x),e=M(b,c);return I(b,c,e,c.getAgentEdges().toList(function(b){return a.isVisible(b)&&b.s(x)===d&&M(b,c)===e}),e===u||e===w)},O=function(a,b){var c=a.getSourceAgent()===b,d=c?a.getTargetAgent():a.getSourceAgent(),e=b.p(),f=d.p();return c?e.x<f.x?u:t:e.y>f.y?v:w},P=function(a,b,c){var d=b.s(x),e=O(b,c);return I(b,c,e,c.getAgentEdges().toList(function(b){return a.isVisible(b)&&b.s(x)===d&&O(b,c)===e}),e===u||e===w)},Q=function(a,b,c){var d=a.getSourceAgent(),e=a.getTargetAgent(),f=d.getId()>e.getId(),g=f?e:d,h=f?d:e,i=g.p(),j=h.p(),k=c(b,a,g),l=c(b,a,h),m=a.s(z),o=m?0:B(b,g)/2,p=m?0:B(b,h)/2,q=m?0:C(b,g)/2,r=m?0:C(b,h)/2,s=k.offset,x=l.offset,y=k.side,A=l.side,D=new n;return y===v?(D.add({x:i.x+s,y:i.y-q}),D.add({x:i.x+s,y:j.y+x}),A===t?D.add({x:j.x-p,y:j.y+x}):D.add({x:j.x+p,y:j.y+x})):y===w?(D.add({x:i.x+s,y:i.y+q}),D.add({x:i.x+s,y:j.y+x}),A===t?D.add({x:j.x-p,y:j.y+x}):D.add({x:j.x+p,y:j.y+x})):y===t?(D.add({x:i.x-o,y:i.y+s}),D.add({x:j.x+x,y:i.y+s}),A===w?D.add({x:j.x+x,y:j.y+r}):D.add({x:j.x+x,y:j.y-r})):y===u&&(D.add({x:i.x+o,y:i.y+s}),D.add({x:j.x+x,y:i.y+s}),A===w?D.add({x:j.x+x,y:j.y+r}):D.add({x:j.x+x,y:j.y-r})),f&&D.reverse(),H(D,a)};s("ortho2",function(a,b,c,d){var e,f,g=a.s(z),h=a.s("edge.ortho"),i=a.getSourceAgent(),j=a.getTargetAgent(),k=i.getId()>j.getId(),l=k?j:i,m=k?i:j,o=l.p(),p=m.p(),q=L(c,a,l),r=L(c,a,m),s=g?0:B(c,l)/2,x=g?0:C(c,l)/2,y=g?0:B(c,m)/2,A=g?0:C(c,m)/2,D=new n,E=q.offset,F=r.offset,G=q.side;return G===u?(e=p.y>o.y?-E:E,f=o.x+s+(p.x-y-o.x-s)*h,D.add({x:o.x+s,y:o.y+E}),D.add({x:f+e,y:o.y+E}),D.add({x:f+e,y:p.y+F}),D.add({x:p.x-y,y:p.y+F})):G===t?(e=p.y>o.y?-E:E,f=o.x-s-(o.x-s-p.x-y)*h,D.add({x:o.x-s,y:o.y+E}),D.add({x:f-e,y:o.y+E}),D.add({x:f-e,y:p.y+F}),D.add({x:p.x+y,y:p.y+F})):G===w?(e=p.x>o.x?-E:E,f=o.y+x+(p.y-A-o.y-x)*h,D.add({x:o.x+E,y:o.y+x}),D.add({x:o.x+E,y:f+e}),D.add({x:p.x+F,y:f+e}),D.add({x:p.x+F,y:p.y-A})):G===v&&(e=p.x>o.x?-E:E,f=o.y-x-(o.y-x-p.y-A)*h,D.add({x:o.x+E,y:o.y-x}),D.add({x:o.x+E,y:f-e}),D.add({x:p.x+F,y:f-e}),D.add({x:p.x+F,y:p.y+A})),k&&D.reverse(),H(D,a)},!0),s("flex2",function(a,b,c,d){var e,f=a.getSourceAgent(),g=a.getTargetAgent(),h=f.getId()>g.getId(),i=h?g:f,j=h?f:g,k=i.p(),l=j.p(),m=L(c,a,i),o=L(c,a,j),p=a.s(z),q=a.s("edge.flex")+(m.size-1)/2*a.s(y),r=p?0:B(c,i)/2,s=p?0:C(c,i)/2,x=p?0:B(c,j)/2,A=p?0:C(c,j)/2,D=new n,E=m.offset,F=o.offset,G=m.side;return G===u?(e=l.y>k.y?-E:E,D.add({x:k.x+r,y:k.y+E}),D.add({x:k.x+r+q+e,y:k.y+E}),D.add({x:l.x-x-q+e,y:l.y+F}),D.add({x:l.x-x,y:l.y+F})):G===t?(e=l.y>k.y?-E:E,D.add({x:k.x-r,y:k.y+E}),D.add({x:k.x-r-q-e,y:k.y+E}),D.add({x:l.x+x+q-e,y:l.y+F}),D.add({x:l.x+x,y:l.y+F})):G===w?(e=l.x>k.x?-E:E,D.add({x:k.x+E,y:k.y+s}),D.add({x:k.x+E,y:k.y+s+q+e}),D.add({x:l.x+F,y:l.y-A-q+e}),D.add({x:l.x+F,y:l.y-A})):G===v&&(e=l.x>k.x?-E:E,D.add({x:k.x+E,y:k.y-s}),D.add({x:k.x+E,y:k.y-s-q-e}),D.add({x:l.x+F,y:l.y+A+q-e}),D.add({x:l.x+F,y:l.y+A})),h&&D.reverse(),H(D,a)},!0),s("extend.north2",function(a,b,c){var d=a.getSourceAgent(),e=a.getTargetAgent(),f=d.getId()>e.getId(),g=f?e:d,i=f?d:e,j=g.p(),k=i.p(),l=J(c,a,g,v),m=J(c,a,i,v,!0),o=a.s(z),p=o?0:C(c,g)/2,q=o?0:C(c,i)/2,r=l.offset,s=m.offset,t=a.s(A)+(l.size-1)/2*a.s(y),u=h(j.y-p,k.y-q)-t+(j.x<k.x?r:-r),w=new n;return w.add({x:j.x+r,y:j.y-p}),w.add({x:j.x+r,y:u}),w.add({x:k.x+s,y:u}),w.add({x:k.x+s,y:k.y-q}),f&&w.reverse(),H(w,a)},!0),s("extend.south2",function(a,b,c){var d=a.getSourceAgent(),e=a.getTargetAgent(),f=d.getId()>e.getId(),h=f?e:d,i=f?d:e,j=h.p(),k=i.p(),l=J(c,a,h,w),m=J(c,a,i,w,!0),o=a.s(z),p=o?0:C(c,h)/2,q=o?0:C(c,i)/2,r=l.offset,s=m.offset,t=a.s(A)+(l.size-1)/2*a.s(y),u=g(j.y+p,k.y+q)+t+(j.x>k.x?r:-r),v=new n;return v.add({x:j.x+r,y:j.y+p}),v.add({x:j.x+r,y:u}),v.add({x:k.x+s,y:u}),v.add({x:k.x+s,y:k.y+q}),f&&v.reverse(),H(v,a)},!0),s("extend.west2",function(a,b,c){var d=a.getSourceAgent(),e=a.getTargetAgent(),f=d.getId()>e.getId(),g=f?e:d,i=f?d:e,j=g.p(),k=i.p(),l=J(c,a,g,v),m=J(c,a,i,v,!0),o=a.s(z),p=o?0:B(c,g)/2,q=o?0:B(c,i)/2,r=l.offset,s=m.offset,t=a.s(A)+(l.size-1)/2*a.s(y),u=h(j.x-p,k.x-q)-t+(j.y<k.y?r:-r),w=new n;return w.add({x:j.x-p,y:j.y+r}),w.add({x:u,y:j.y+r}),w.add({x:u,y:k.y+s}),w.add({x:k.x-q,y:k.y+s}),f&&w.reverse(),H(w,a)},!0),s("extend.east2",function(a,b,c){var d=a.getSourceAgent(),e=a.getTargetAgent(),f=d.getId()>e.getId(),h=f?e:d,i=f?d:e,j=h.p(),k=i.p(),l=J(c,a,h,v),m=J(c,a,i,v,!0),o=a.s(z),p=o?0:B(c,h)/2,q=o?0:B(c,i)/2,r=l.offset,s=m.offset,t=a.s(A)+(l.size-1)/2*a.s(y),u=g(j.x+p,k.x+q)+t+(j.y>k.y?r:-r),w=new n;return w.add({x:j.x+p,y:j.y+r}),w.add({x:u,y:j.y+r}),w.add({x:u,y:k.y+s}),w.add({x:k.x+q,y:k.y+s}),f&&w.reverse(),H(w,a)},!0),s("v.h2",function(a,b,c){return Q(a,c,N)},!0),s("h.v2",function(a,b,c){return Q(a,c,P)},!0)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);