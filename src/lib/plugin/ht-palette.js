!function(a,b,c){"use strict";var d="px",e="0",f="innerHTML",g="className",h=ht.Default,i=ht.Color,j=ht.Node,k="position",l="top",m="left",n=h.animate,o=h.getInternal(),p="width",e="0",q="none",r="max-height",s="font",t="background",u="border-box",v="user-select",w="box-sizing",x="overflow",y=h.isTouchable,o=h.getInternal(),z=i.titleIconBackground,A=h.scrollBarInteractiveSize,B=/msie 9/.test(a.navigator?a.navigator.userAgent.toLowerCase():""),C=null,D=function(){return document},E=function(a){return D().createElement(a)},F=function(){return E("div")},G=function(){var a=F(),b=a.style;return b.msTouchAction=q,b.cursor="default",y&&b.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",C),b.position="absolute",b.left=e,b.top=e,a},H=function(){return E("canvas")},I=function(){return document.body},J=function(a,b,c){a.style.setProperty(b,c,C)},K=function(a,b){a.style.removeProperty(b)},L=function(a,b,c){h.def(ht.widget[a],b,c)},M=function(a,b){a.appendChild(b)},N=function(a,b){a.removeChild(b)},O=o.addEventListener;o.removeEventListener;o.addMethod(h,{paletteExpandIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:z,rotation:3.14}]},paletteCollapseIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:z}]},paletteTitleLabelColor:h.labelSelectColor,paletteTitleLabelFont:h.labelFont,paletteContentLabelFont:h.labelFont,paletteContentLabelColor:"#777",paletteContentBackground:"#fff",paletteTitleHeight:h.widgetTitleHeight,paletteTitleBackground:i.titleBackground,paletteTitleHoverBackground:i.titleBackground,paletteSeparatorWidth:1,paletteSeparatorColor:c,paletteItemHoverBorderColor:i.highlight,paletteItemSelectBackground:i.highlight},!0);var P=".palette-item:hover{border: 1px solid "+h.paletteItemHoverBorderColor+" !important} .palette-header:hover{background: "+h.paletteTitleHoverBackground+" !important}",Q=document.createElement("style");y||(Q.styleSheet?Q.styleSheet.cssText=P:Q.appendChild(D().createTextNode(P))),D().getElementsByTagName("head")[0].appendChild(Q);var R=function(a){var b=this;b.$22h=a,b.addListeners()};h.def(R,b,{ms_listener:1,getView:function(){return this.$22h.getView()},$26h:function(){var a=this;a.$36h&&I().removeChild(a.$36h),a.$23h=a.$24h=a.$25h=a.$35h=a.$36h=C},handle_touchstart:function(a){for(var b,c=this,d=c.$22h,e=a.target,f=d.sm(),i=d.dm(),j="palette-header",k="palette-header-tool",l="palette-item",m=!1,n=!1,o=!1;e&&(e[g]||"").indexOf(j)<0&&(e[g]||"").indexOf(l)<0;)e=e.parentNode;if(e&&e[g].indexOf(k)>=0?m=!0:e&&e[g].indexOf(j)>=0?o=!0:e&&e[g].indexOf(l)>=0&&(n=!0),h.isLeftButton(a))if(c.$27h(a))c.$24h=h.getClientPoint(a),c.$25h=d.ty();else if(m){h.preventDefault(a),b=e.parentNode.$11h;var p=i.getDataById(b),q=p.s("tools")[e.toolIndex];q.action&&q.action.call(d)}else if(o){h.preventDefault(a),b=e.$11h;var p=i.getDataById(b);p.isExpanded()?p.setExpanded(!1):p.setExpanded(!0)}else if(n){b=e.$11h;var r=i.getDataById(b);f.ss(r),d.handleDragAndDrop&&(h.preventDefault(a),r.s("draggable")&&(d.handleDragAndDrop(a,"prepare"),c.$35h=0)),r.s("draggable")||(h.preventDefault(a),c.$24h=h.getClientPoint(a),c.$25h=d.ty())}else h.preventDefault(a),c.$24h=h.getClientPoint(a),c.$25h=d.ty();else c.$26h(a)},handle_mousedown:function(a){this.handle_touchstart(a)},handle_mousewheel:function(a){this.handleScroll(a,a.wheelDelta/40,a.wheelDelta!==a.wheelDeltaX)},handle_DOMMouseScroll:function(a){this.handleScroll(a,-a.detail,1)},handleScroll:function(a,b,c){var d=this.$22h;h.preventDefault(a),c&&d._41o()&&d.ty(d.ty()+20*b)},handle_mouseup:function(a){this.handle_touchend(a)},handle_touchend:function(a){var b=this;b.$37h(a),b.$26h(a)},handleWindowMouseUp:function(a){this.handleWindowTouchEnd(a)},handleWindowTouchEnd:function(a){var b=this;b.$37h(a),b.$26h(a)},$37h:function(a){var b=this,c=b.$22h;2===b.$35h&&(b.$35h=3,c.handleDragAndDrop(a,"end"))},handleWindowMouseMove:function(a){this.handleWindowTouchMove(a)},handleWindowTouchMove:function(a){var b=this,c=b.$22h,e=b.$23h,f=b.$24h,g=b.$25h,i=h.getClientPoint(a),j=c._29I,k=b.$36h;if(1===b.$35h||2===b.$35h){if(b.$35h=2,c.handleDragAndDrop(a,"between"),y){var l=a.touches[0];a=l?l:a.changedTouches[0]}k.style.left=a.pageX-parseInt(k.width)/2+d,k.style.top=a.pageY-parseInt(k.height)/2+d}else"p"===e?c.ty(g+i.y-f.y):"v"===e&&c.ty(g+(f.y-i.y)/j.height*c._59I)},handle_mousemove:function(a){this.handle_touchmove(a)},handle_touchmove:function(a){if(!h.isDragging()&&h.isLeftButton(a)){var b=this,c=b.$22h,e=b.$27h(a);if(b.$24h){if(!b.$23h){if(h.getDistance(h.getClientPoint(a),b.$24h)<2)return;e?b.$23h="v":b.$23h="p",h.startDragging(b)}}else if(e)c._43o();else if(0===b.$35h){if(b.$35h=1,c.handleDragAndDrop(a,"begin"),y){var f=a.touches[0];a=f?f:a.changedTouches[0]}var g=b.$36h=new Image,i=c.$10h[c.sm().ld().getId()].querySelector(".image-box"),j=parseInt(i.style.width),k=parseInt(i.style.height);g.draggable=!1,g.src=i.toDataURL(),g.width=j,g.height=k,g.style.position="absolute",g.style.left=a.pageX-j/2+d,g.style.top=a.pageY-k/2+d,I().appendChild(g),h.startDragging(b)}}},$27h:function(a){var b=this.$22h,c=b.getView(),d=c.getBoundingClientRect(),e=b._29I,f=a.clientX-d.left+c.scrollLeft;return b._41o()&&e.x+e.width-f<A}}),ht.widget.Palette=function(a){var b=this,c=b._view=o.createView(null,b);b.$9h={},b.$10h={},b.$4h={},b._29I={x:0,y:0,width:0,height:0},b._59I=0,b.dm(a?a:new ht.DataModel),c[g]="ht-widget-palette",b.$29h=new R(b),J(c,t,h.paletteContentBackground),J(c,x,"auto"),J(c,w,u),J(c,"-moz-"+w,u),J(c,"-webkit-"+v,q),J(c,"-moz-"+v,q),J(c,"-ms-"+v,q),J(c,v,q),J(c,"position","absolute"),J(c,"overflow","hidden"),M(c,b._79O=G()),O(c,"dragstart",function(a){a.dataTransfer&&(a.dataTransfer.setData("Text","nodeid:"+a.target.$11h),a.dataTransfer.effectAllowed="all",b.$29h.$26h())})},L("Palette",b,{ms_v:1,ms_fire:1,ms_dm:1,ms_sm:1,ms_vs:1,ms_ac:["itemImageWidth","itemImageHeight","itemImagePadding","itemMargin","layout","autoHideScrollBar","scrollBarSize","scrollBarColor"],$30h:0,_itemImagePadding:4,_itemImageWidth:70,_itemImageHeight:50,_itemMargin:10,_layout:"largeicons",_autoHideScrollBar:h.autoHideScrollBar,_scrollBarSize:h.scrollBarSize,_scrollBarColor:h.scrollBarColor,getViewRect:function(){return this._29I},ty:function(a){return a==C?this.getTranslateY():void this.setTranslateY(a)},setTranslateY:function(a){if(this.$32h==C){var b=this,c=b.$33h(a),d=b.$30h;b.$30h=c,b.fp("translateY",d,c)}},getTranslateY:function(){return this.$30h},setLayout:function(a){var b,c,d=this,e=d._layout;d._layout=a,"smallicons"===a?b=c=20:"iconsonly"===a?b=c=50:(b=70,c=50),d.setItemImageWidth(b),d.setItemImageHeight(c),d.setItemImagePadding(4),d.fp("layout",e,a)},getDataAt:function(a){for(var b=a.target;b&&b.$11h==C;)b=b.parentNode;return b&&b.$11h!=C?this.getDataModel().getDataById(b.$11h):void 0},$20h:function(){var a=16;return y&&(a*=1.2),a},$19h:function(){return h.paletteTitleHeight},$18h:function(){var a=h.paletteSeparatorWidth,b=h.paletteTitleBackground,c=h.paletteSeparatorColor||h.brighter(b);return a+d+" solid "+c},$17h:function(a){J(a,"cursor","pointer"),J(a,"display","inline-block"),J(a,"margin-right",(y?8:4)+d),J(a,"vertical-align",l)},$1h:function(a){var b=this,c=F(),i=F(),j=E("span");c[g]="palette-header",J(c,k,"relative"),J(c,t,h.paletteTitleBackground),J(c,"color",h.paletteTitleLabelColor),J(c,l,e),J(c,w,u),J(c,"-moz-"+w,u),J(c,"padding","0 5px 0 0"),J(c,"border-top",b.$18h()),J(c,p,"100%"),J(c,"cursor","pointer"),J(c,"white-space","nowrap"),J(c,x,"hidden"),J(c,s,h.paletteTitleLabelFont),J(c,"line-height",b.$19h()+d),c.$11h=a.getId();var m=H(),n=b.$19h(),q=b.$20h();b.$17h(m),o.setCanvas(m,q,n),M(c,m);var r=a.s("tools");if(r)for(var v=0;v<r.length;v++){var y=H();b.$17h(y),o.setCanvas(y,q,n),y[g]="palette-header-tool palette-header-tool"+a.getId()+"-"+v,y.style.position="absolute",y.style.right=(q+10)*v+"px",y.toolIndex=v,M(c,y)}return m[g]="palette-toggle-icon-"+a.getId(),i[g]="palette-content",J(i,"max-height",0+d),J(i,s,h.paletteContentLabelFont),J(i,x,"hidden"),i.$11h=a.getId(),b.$9h[a.getId()]=i,j[f]=a.getName(),J(j,s,h.paletteTitleLabelFont),M(c,m),M(c,j),[c,i]},$2h:function(a){var b=this,c=b._layout,e=B&&a.s("draggable")?E("a"):F(),i=H(),j=F(),k=a.getName()||"",n=a.s("title")||a.getToolTip()||k,p=b._itemMargin;i[g]="image-box";var r=b.getItemImageWidth(),s=b.getItemImageHeight();return o.setCanvas(i,r,s),M(e,i),j[f]=k,j[g]="label-box","iconsonly"!==c&&M(e,j),e[g]="palette-item",J(e,"vertical-align",l),J(e,"cursor","pointer"),J(e,"border-radius",5+d),J(e,"border","1px solid transparent"),J(e,"text-align","center"),J(e,"display","inline-block"),J(e,"margin-left",p+d),J(e,"margin-top",p+d),J(e,"color",h.paletteContentLabelColor),"smallicons"===c?(J(i,"vertical-align","middle"),J(e,"margin-left",2+d),J(e,"margin-top",2+d),J(e,"padding",2+d),J(e,"text-align",m),J(j,"display","inline-block"),J(j,"min-width",b.$21h+b._itemMargin+d)):"largeicons"===c&&(J(j,"max-width",r+d),J(j,"overflow","hidden")),e.$11h=a.getId(),n&&(e.title=n),a.s("draggable")&&!b.handleDragAndDrop&&(B?(e.href="#",J(e,"text-decoration",q)):e.draggable="true"),e},$16h:function(a,b,c,d){var e=o.initContext(a);o.translateAndScale(e,0,0,1),e.clearRect(0,0,c,c);var f=(c-d)/2;h.drawStretchImage(e,h.getImage(b),"fill",0,f,d,d),e.restore()},$15h:function(a){var b=this,c=a.getId(),d=b._view.querySelector(".palette-toggle-icon-"+c),e=a.isExpanded()?h.paletteCollapseIcon:h.paletteExpandIcon;if(d&&e){var f=b.$19h(),g=b.$20h();b.$16h(d,e,f,g)}},_drawToolsIcon:function(a){var b=this,c=a.s("tools");if(c)for(var d=0;d<c.length;d++){var e=b._view.querySelector(".palette-header-tool"+a.getId()+"-"+d),f=c[d].icon,g=b.$19h(),h=b.$20h();b.$16h(e,f,g,h)}},$14h:function(a){var b=this,c=a.getId(),d=b.$10h[c].querySelector(".image-box"),e=a.getImage(),f=a.s("image.stretch");if(d&&e){var g=o.initContext(d),i=b.getItemImagePadding();i="smallicons"===b._layout?i/2:i;var j=b.getItemImageWidth()-2*i,k=b.getItemImageHeight()-2*i;o.translateAndScale(g,0,0,1),g.clearRect(0,0,j,k),h.drawStretchImage(g,h.getImage(e),f,i,i,j,k,a,b),g.restore()}},validateImpl:function(){var a,b,c,g=this,i=g.$9h,k=g._layout,l=g.$10h,m=g.$4h,o=g._view,p=g.dm();if(g.$13h&&(delete g.$13h,m={},p.each(function(a){m[a.getId()]=a})),"smallicons"===k)for(var q in m){var s=m[q];if(s instanceof j){var t=s.getName()||"",u=h.getTextSize(h.paletteContentLabelFont,t).width;g.$21h!=C&&g.$21h>u||(g.$21h=u)}}for(var q in m){c=m[q];var v,w;if(p.contains(c)){if(c instanceof ht.Group){var x,y=g.$1h(c),z=l[c.getId()];z&&(x=z.nextSibling,N(o,x),N(o,z)),b=p.getSiblings(c).indexOf(c);var A=o.children[2*b]||g._79O;A&&A.parentNode?(o.insertBefore(y[0],A),o.insertBefore(x||y[1],A)):(o.appendChild(y[0]),o.appendChild(x||y[1])),l[c.getId()]=y[0],a=i[c.getId()]=x||y[1],w=c.$12h;var B=c.s("promptText");w||(c.$12h=E("div"),c.$12h[f]=B||"",w=c.$12h),0===c.getChildren().size()?a.contains(w)||M(a,w):a.contains(w)&&N(a,w)}else if(v=c.getParent()){var D=g.$2h(c),F=l[c.getId()];a=i[v.getId()],F&&N(F.parentNode,F),b=p.getSiblings(c).indexOf(c);var G=a.children[b];G?a.insertBefore(D,G):M(a,D),l[c.getId()]=D,g.$14h(c)}}else{var H=l[c.getId()],I=H.parentNode;if(c instanceof ht.Group){var J=H.nextSibling;N(o,H),N(o,J),delete i[c.getId()]}else N(I,H),0===I.children.length&&(v=p.getDataById(I.$11h),v&&(w=v.$12h,w&&!I.contains(w)&&M(I,w)));delete l[c.getId()]}}g.$4h={};var K=function(){var a=g._59I,b=0;g.$32h!=C&&(clearInterval(g.$32h),b=0,delete g.$32h),g.$32h=setInterval(function(){g.$31h(),a===g._59I?(b++,b>=2&&(clearInterval(g.$32h),delete g.$32h)):(b=0,a=g._59I)},30)};for(var L in i)if(a=i[L],c=p.getDataById(i[L].$11h),g.$15h(c),g._drawToolsIcon(c),c.isExpanded()){if(a.style.maxHeight===0+d){var O=a.scrollHeight+g._itemMargin+d;n(a).duration(200).set(r,O).set("padding-bottom",g._itemMargin+d).end(function(a){return function(){K()}}(O))}else a.style.maxHeight=a.scrollHeight+d;a.style.paddingBottom=g._itemMargin+d}else a.style.maxHeight!==0+d&&n(a).duration(200).set(r,e).set("padding-bottom",e).end(function(a){return function(){K()}}(a));g.$28h(),g.$31h()},$31h:function(){for(var a=this,b=a._view,c=0,e=b.children,f=0;f<e.length;f++){var g=e[f];g.className&&g.className.indexOf("palette-")>=0&&(c+=g.offsetHeight)}a._59I=c,a.$30h=a.$33h(a.ty());var h=a.ty();b.scrollTop=-h,a._29I={x:0,y:-h,width:b.clientWidth,height:b.clientHeight},J(a._79O,l,-h+d),a._93I()},$33h:function(a){var b=this,c=b._29I.height-b._59I;return c>a&&(a=c),a>0?0:Math.round(a)},redraw:function(){this.$13h||(this.$13h=1,this.iv())},onPropertyChanged:function(a){["autoHideScrollBar","scrollBarSize","scrollBarColor","translateY"].indexOf(a.property)<0&&this.redraw(),"translateY"===a.property&&(this.iv(),this._43o())},findDataByName:function(a){for(var b=this.dm().getDatas(),c=0;c<b.size();c++){var d=b.get(c);if(d.getName()===a)return d}},setDataModel:function(a){var b=this,c=b._dataModel,d=b._selectionModel;c!==a&&(c&&(c.umm(b.$6h,b),c.umd(b.$8h,b),c.umh(b.$7h,b),d||c.sm().ums(b.$28h,b)),b._dataModel=a,a.mm(b.$6h,b),a.md(b.$8h,b),a.mh(b.$7h,b),d?d._21I(a):a.sm().ms(b.$28h,b),b.sm().setSelectionMode("single"),b.fp("dataModel",c,a))},$6h:function(a){var b=this,c=b._view,d=a.data,e=b.$4h;"add"===a.kind?e[d.getId()]=d:"remove"===a.kind?e[d.getId()]=d:"clear"===a.kind&&(b.$10h={},b.$9h={},b.$4h={},c[f]=""),b.iv()},$7h:function(a){var b=this,c=a.data;b.$4h[c.getId()]=c,b.iv()},$8h:function(a){var b=this,c=a.data,d=a.property;"expanded"===d?b.iv():(b.$4h[c.getId()]=c,b.iv())},$28h:function(){var a,b=this,c=b.sm(),d="palette-item",e=c.ld();this.dm().each(function(c){a=b.$10h[c.getId()],a&&a[g].indexOf(d)>=0&&(c===e?J(a,t,h.paletteItemSelectBackground):K(a,t))})}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);