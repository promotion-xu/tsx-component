!function(a,b,c){"use strict";var d="ht",e=a[d],f="innerHTML",g="className",h=null,i="px",j=e.Default,k=j.getInternal(),l="0",m=function(){return document},n=function(a){return m().createElement(a)},o=function(){return n("canvas")},p=function(a,b,c){a.style.setProperty(b,c,h)},q=function(a,b,c){j.def(e.widget[a],b,c)},r=function(a,b){a.appendChild(b)},s=function(a,b){a.removeChild(b)},t=k.addEventListener,u=k.removeEventListener,v=j.isTouchable;k.addMethod(j,{menuLabelFont:(v?"16":"13")+"px arial, sans-serif",menuLabelColor:"#000",menuBackground:"#F0EFEE",menuHoverBackground:"#648BFE",menuHoverLabelColor:"#fff",menuSeparatorWidth:1,menuSeparatorColor:"#999"},!0),e.widget.Menu=function(a){var b=this,c=b._view=k.createView(null,b),d=b.$1g=new e.widget.ContextMenu,f=n("ul");d._r=!0,d._view[g]+=" ht-widget-dropdownmenu",c[g]="ht-widget-menu",f[g]="header",p(c,"margin",l),p(c,"padding",l),p(c,"background",j.menuBackground),p(c,"-webkit-user-select","none"),p(c,"-moz-user-select","none"),p(c,"user-select","none"),p(c,"text-align","left"),p(c,"border-bottom",j.menuSeparatorWidth+"px solid "+j.menuSeparatorColor),p(c,"cursor","default"),p(c,"overflow","auto"),p(c,"white-space","nowrap"),p(c,"font",j.menuLabelFont),p(c,"color",j.menuLabelColor),p(c,"box-sizing","border-box"),p(c,"-moz-box-sizing","border-box"),p(f,"list-style","none"),p(f,"margin",l),p(f,"padding",l),p(f,"display","inline-block"),r(c,f),b.setItems(a),b.$2g=function(a){b.$3g(a)},b.$4g=function(a){b.$5g(a)},b.$6g=function(a){b.$7g(a)},b.$8g=function(a){b.$9g(a)},b.$9b=function(a){b.$10g(a)},b._autoShow=!0,b.setAutoShow(!1),d.afterHide=function(){b.$11g()},d.afterShow=function(){b.$12g()},u(m(),"keydown",d.$3b),b.$3b=function(a){b.$13g(a)},b.invalidate()},q("Menu",b,{_items:h,$14g:j.menuHoverBackground,$15g:j.menuHoverLabelColor,$16g:{},_enableGlobalKey:!1,ms_v:1,$21g:"smallicons",$22g:0,$23g:0,$24g:"left",getDropDownMenu:function(){return this.$1g},setLayout:function(a){var b=this;if(b.$21g=a,b.setItems(b._items),"largeicons"===a){for(var c=b._view.querySelectorAll(".header-item"),d=0,e=0;e<c.length;e++){var f=c[e];d=Math.max(d,f.clientWidth)}for(var e=0;e<c.length;e++){var f=c[e];p(f,"min-width",d+i)}}this.invalidate()},getLayout:function(){return this.$21g},setHeaderItemHGap:function(a){this.$22g=a;for(var b=this._view.querySelectorAll(".header-item"),c=0;c<b.length;c++){var d=b[c];p(d,"margin-left",a+i),p(d,"margin-right",a+i)}},getHeaderItemHGap:function(){return this.$22g},setHeaderItemVGap:function(a){this.$23g=a;for(var b=this._view.querySelectorAll(".header-item"),c=0;c<b.length;c++){var d=b[c];p(d,"margin-top",a+i),p(d,"margin-bottom",a+i)}},getHeaderItemVGap:function(){return this.$24g},setHeaderItemAlign:function(a){this.$24g=a,p(this._view,"text-align",a)},getHeaderItemAlign:function(){return this.$23g},enableGlobalKey:function(){var a=this,b=a._enableGlobalKey;b===!1&&(t(m(),"keydown",a.$3b),a._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,u(m(),"keydown",this.$3b)},setHoverBackground:function(a){this.$14g=a},setHoverColor:function(a){this.$15g=a},setItems:function(a){var b=this,c=b._view,d=b.$21g;if(b._items=a,c.children[0][f]="",b.$16g={},a&&a.length){for(var e=c.children[0],h=0,i=m().createDocumentFragment();h<a.length;h++){var j=a[h],k=n("li"),l=n("span");if(j.icon){var q=o();q[g]="menu-item-icon","smallicons"===d?(p(q,"height","1.2em"),p(q,"width","1.2em"),p(q,"vertical-align","middle")):(p(q,"height","32px"),p(q,"width","32px"),p(q,"display","block"),p(q,"margin","0 auto")),q.$20g=j.icon,r(k,q)}k[g]="header-item",p(k,"display","inline-block"),p(k,"vertical-align","top"),p(k,"padding","0 1.2em"),p(k,"line-height","1.8em"),"largeicons"===d&&p(k,"text-align","center"),p(k,"background-color","rgba(0,0,0,0)"),k.setAttribute("data-index",h),b.$16g[h]=j.items,l[f]=j.label,"iconsonly"!==d&&r(k,l),r(i,k)}r(e,i)}},showDropdownMenu:function(a){var b=this,c=b.$16g[a],d=b.$1g,e=b._view.children[0].children[a],f=b.$17g;if(e&&e!==f){f&&b.hideDropdownMenu();var g=e.getBoundingClientRect(),h=j.getWindowInfo();b.$17g=e,d.setItems(c),d.show(g.left+h.left,g.top+g.height+h.top,!1)}},hideDropdownMenu:function(){this.$1g.hide()},getItemByProperty:function(a,b){var c=this,d=c._items;return d&&0!==d.length?c.$1g.getItemByProperty(a,b,d):h},$12g:function(){var a=this,b=a.$17g;b.style.background=a.$14g,b.style.color=a.$15g,a._autoShow||t(m(),v?"touchstart":"mousedown",a.$9b)},$11g:function(){var a=this,b=a.$17g;b&&(b.style.background="",b.style.color="",a.$17g=h),u(m(),v?"touchstart":"mousedown",a.$9b)},$10g:function(a){var b=this,c=b._view,d=b.$1g,e=c.children[0];!m().body.contains(c)||e.contains(a.target)||d._view.contains(a.target)||b.hideDropdownMenu()},$13g:function(a){var b=this,c=b.$1g;m().body.contains(b._view)&&c.$13b.$4b.call(c.$13b,a,b._items)},setAutoShow:function(a){var b=this,c=b.$1g,d=b._view;b._autoShow!==a&&(b._autoShow?(u(d,"mouseover",b.$2g),u(d,"mouseout",b.$4g),u(c._view,"mouseout",b.$4g),v||(t(d,"mouseover",b.$8g),t(d,"mouseout",b.$8g)),t(d,v?"touchstart":"mousedown",b.$6g)):(u(d,"mouseover",b.$8g),u(d,"mouseout",b.$8g),u(d,v?"touchstart":"mousedown",b.$6g),u(m(),v?"touchstart":"mousedown",b.$9b),v||(t(d,"mouseover",b.$2g),t(d,"mouseout",b.$4g),t(c._view,"mouseout",b.$4g))),b._autoShow=a)},$3g:function(a){var b=this,c=b._view.children[0],d=a.target;if(c!==d&&c.contains(d)){for(;"header-item"!==d[g];)d=d.parentNode;b.showDropdownMenu(d.getAttribute("data-index"))}},$5g:function(a){var b=this,c=b._view.children[0],d=b.$1g,e=a.target,f=a.relatedTarget;!c.contains(e)&&!d._view.contains(e)||c.contains(f)||d._view.contains(f)||b.hideDropdownMenu()},$7g:function(a){a.preventDefault();var b=this,c=b._view.children[0],d=b.$1g,e=a.target;if(j.isLeftButton(a)&&c!==e&&c.contains(e))if(v){for(;"header-item"!==e[g];)e=e.parentNode;var f=e.getAttribute("data-index"),d=b.$1g,h=b._view.children[0].children[f],i=b.$17g;d.isShowing()&&b.hideDropdownMenu(),h!==i&&b.showDropdownMenu(f)}else if(d.isShowing())b.hideDropdownMenu();else{for(;"header-item"!==e[g];)e=e.parentNode;b.showDropdownMenu(e.getAttribute("data-index"))}},$9g:function(a){var b=this,c=b._view,d=b.$1g,e=a.target;if(c.contains(e)){for(var f=c.querySelectorAll(".header-item"),g=h,i=0;i<f.length;i++){var j=f[i];j.style.background="",j.style.color="","mouseover"===a.type?j.contains(e)&&(g=j):"mouseout"===a.type&&d.isShowing()&&b.$17g===j&&(g=j)}d.isShowing()&&(g||(g=b.$17g),b.showDropdownMenu(g.getAttribute("data-index"))),g&&(g.style.background=b.$14g,g.style.color=b.$15g)}},getShowingMenuIndex:function(){var a=this.$17g;return a?a.getAttribute("data-index"):-1},addTo:function(a){var b=this,c=b._view;r(a,c),b.invalidate()},dispose:function(){var a=this,b=a._view,c=a.$1g;b&&(a._autoShow?(u(b,"mouseover",a.$2g),u(b,"mouseout",a.$4g),u(c._view,"mouseout",a.$4g)):(u(b,"mouseover",a.$8g),u(b,"mouseout",a.$8g),u(b,v?"touchstart":"mousedown",a.$6g),u(m(),v?"touchstart":"mousedown",a.$9b)),u(m(),"keydown",a.$3b),c.dispose(),b.parentNode&&s(b.parentNode,b),a._view=a.$1g=a.$16g=a._items=a.$17g=a.$2g=a.$4g=a.$6g=a.$8g=a.$9b=a.$3b=h)},$19g:function(a,b,c,d){var e=k.initContext(a);k.translateAndScale(e,0,0,1),e.clearRect(0,0,c,d),j.drawStretchImage(e,j.getImage(b),"fill",0,0,c,d),e.restore()},validateImpl:function(){var a,b,c,d=this,e=d._view,f=e.querySelectorAll(".menu-item-icon");for(c=0;c<f.length;c++){var g=f[c];a=g.clientWidth,b=g.clientHeight,a&&b&&(k.setCanvas(g,a,b),d.$19g(g,j.getImage(g.$20g),a,b))}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);